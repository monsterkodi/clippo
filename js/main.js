// koffee 1.14.0

/*
00     00   0000000   000  000   000
000   000  000   000  000  0000  000
000000000  000000000  000  000 0 000
000 0 000  000   000  000  000  0000
000   000  000   000  000  000   000
 */
var _, activeApp, app, appIconSync, appName, buffers, childp, clearBuffer, clipboard, clippoWatch, copyIndex, deleteIndex, electron, empty, first, fs, getActiveApp, iconDir, kerror, macClipboardChanged, nativeImage, noon, onClipboardChanged, onWillShowWin, originApp, os, osascript, pasteIndex, pkg, post, prefs, quit, readBuffer, ref, reload, saveAppIcon, saveBuffer, slash, watchClipboard, winClipboardChanged;

ref = require('kxk'), _ = ref._, app = ref.app, childp = ref.childp, empty = ref.empty, first = ref.first, fs = ref.fs, kerror = ref.kerror, noon = ref.noon, os = ref.os, osascript = ref.osascript, post = ref.post, prefs = ref.prefs, slash = ref.slash;

electron = require('electron');

pkg = require('../package.json');

if (os.platform() === 'darwin') {
    appIconSync = require('./appiconsync');
}

app = new app({
    dir: __dirname,
    pkg: pkg,
    shortcut: 'CmdOrCtrl+Alt+V',
    index: 'index.html',
    icon: '../img/app.ico',
    tray: '../img/menu@2x.png',
    about: '../img/about.png',
    onQuit: function() {
        return quit();
    },
    onWillShowWin: function() {
        return onWillShowWin();
    },
    width: 1000,
    height: 1200,
    minWidth: 300,
    minHeight: 200
});

clipboard = electron.clipboard;

nativeImage = electron.nativeImage;

buffers = [];

iconDir = "";

activeApp = "";

originApp = null;

clippoWatch = null;

appName = 'clippo';

post.on('paste', function(index) {
    return pasteIndex(index);
});

post.on('del', function(index) {
    return deleteIndex(index);
});

post.onGet('buffers', function() {
    return buffers;
});

post.on('clearBuffer', function() {
    return clearBuffer();
});

getActiveApp = function() {
    var info, script, wxw;
    if (os.platform() === 'win32') {
        wxw = require('wxw');
        info = first(wxw('info', 'top'));
        appName = slash.base(info.path);
    } else if (os.platform() === 'darwin') {
        script = osascript("tell application \"System Events\"\n    set n to name of first application process whose frontmost is true\nend tell\ndo shell script \"echo \" & n");
        appName = childp.execSync("osascript " + script);
        appName = String(appName).trim();
    }
    return appName;
};

saveAppIcon = function(appName) {
    var iconPath, png;
    iconPath = iconDir + "/" + appName + ".png";
    if (!slash.isFile(iconPath)) {
        png = appIconSync(appName, iconDir, 128);
        if (!png) {
            appName = "clippo";
        }
    }
    return appName;
};

onWillShowWin = function() {
    return activeApp = getActiveApp();
};

winClipboardChanged = function() {
    var exapp, exclude, i, iconPath, len, winInfo, wxw;
    wxw = require('wxw');
    appName = 'clippo';
    winInfo = first(wxw('info', 'top'));
    appName = slash.base(winInfo.path);
    exclude = prefs.get('exclude', ['password-turtle']);
    if (!empty(exclude)) {
        for (i = 0, len = exclude.length; i < len; i++) {
            exapp = exclude[i];
            if (appName.startsWith(exapp)) {
                return;
            }
        }
    }
    iconPath = iconDir + "/" + appName + ".png";
    if (!slash.isFile(iconPath)) {
        wxw('icon', winInfo.path, iconPath);
    }
    return onClipboardChanged();
};

macClipboardChanged = function() {
    var currentApp;
    currentApp = getActiveApp();
    if (currentApp.toLowerCase() === 'electron') {
        currentApp = 'clippo';
    }
    if ((!originApp) && (!currentApp)) {
        originApp = 'clippo';
    }
    appName = saveAppIcon(originApp != null ? originApp : currentApp);
    return onClipboardChanged();
};

onClipboardChanged = function() {
    var b, format, i, imageBuffer, imageData, j, k, len, len1, len2, ref1, text;
    ref1 = clipboard.availableFormats();
    for (i = 0, len = ref1.length; i < len; i++) {
        format = ref1[i];
        if (format.startsWith('image/')) {
            imageBuffer = clipboard.readImage().toPNG();
            imageData = imageBuffer.toString('base64');
            for (j = 0, len1 = buffers.length; j < len1; j++) {
                b = buffers[j];
                if ((b.image != null) && b.image === imageData) {
                    appName = b.app;
                    _.pull(buffers, b);
                    break;
                }
            }
            buffers.push({
                app: appName,
                image: imageData,
                count: buffers.length
            });
            reload(buffers.length - 1);
            return;
        }
    }
    text = clipboard.readText();
    if (text.length && text.trim().length) {
        for (k = 0, len2 = buffers.length; k < len2; k++) {
            b = buffers[k];
            if ((b.text != null) && b.text === text) {
                appName = b.app;
                _.pull(buffers, b);
                break;
            }
        }
        buffers.push({
            app: appName,
            text: text,
            count: buffers.length - 1
        });
        return reload(buffers.length - 1);
    }
};

watchClipboard = function() {
    var cw;
    cw = require('electron-clipboard-watcher');
    if (os.platform() === 'win32') {
        return cw({
            watchDelay: 200,
            onImageChange: winClipboardChanged,
            onTextChange: winClipboardChanged
        });
    } else {
        return cw({
            watchDelay: 200,
            onImageChange: macClipboardChanged,
            onTextChange: macClipboardChanged
        });
    }
};

copyIndex = function(index) {
    var image;
    if ((index < 0) || (index > buffers.length - 1)) {
        return;
    }
    if (buffers[index].image) {
        image = nativeImage.createFromBuffer(new Buffer(buffers[index].image, 'base64'));
        if (!image.isEmpty() && (image.getSize().width * image.getSize().height > 0)) {
            clipboard.writeImage(image, 'image/png');
        }
    }
    if ((buffers[index].text != null) && (buffers[index].text.length > 0)) {
        return clipboard.writeText(buffers[index].text, 'text/plain');
    }
};

pasteIndex = function(index) {
    var paste, ref1, wxw;
    copyIndex(index);
    originApp = (ref1 = buffers.splice(index, 1)[0]) != null ? ref1.app : void 0;
    if (os.platform() === 'win32') {
        wxw = require('wxw');
        paste = function() {
            if (activeApp === 'mintty') {
                return wxw('key', 'ctrl+shift+v');
            } else {
                return wxw('key', 'ctrl+v');
            }
        };
        app.win.close();
        return setTimeout(paste, 20);
    } else if (os.platform() === 'darwin') {
        childp.execSync("osascript " + osascript("tell application \"System Events\" to keystroke tab using command down"));
        return childp.execSync("osascript " + osascript("tell application \"System Events\" to keystroke \"v\" using command down"));
    }
};

deleteIndex = function(index) {
    buffers.splice(index, 1);
    return reload(index - 1);
};

quit = function() {
    saveBuffer();
    return clippoWatch != null ? clippoWatch.kill() : void 0;
};

reload = function(index) {
    if (index == null) {
        index = 0;
    }
    return post.toWins('loadBuffers', buffers, index);
};

clearBuffer = function() {
    buffers = [];
    saveBuffer();
    return reload();
};

saveBuffer = function() {
    return noon.save(app.userData + "/buffers.noon", buffers.slice(-prefs.get('maxBuffers', 50)));
};

readBuffer = function() {
    try {
        buffers = noon.load(slash.path(app.userData + "/buffers.noon"));
        return buffers = buffers != null ? buffers : [];
    } catch (error) {
        return buffers = [];
    }
};

post.on('appReady', function() {
    var err;
    readBuffer();
    iconDir = slash.resolve(app.userData + "/icons");
    fs.ensureDirSync(iconDir);
    try {
        fs.accessSync(slash.join(iconDir, 'clippo.png'), fs.R_OK);
    } catch (error) {
        try {
            fs.copySync(__dirname + "/../img/clippo.png", slash.join(iconDir, 'clippo.png'));
        } catch (error) {
            err = error;
            kerror("can't copy clippo icon: " + err);
        }
    }
    return watchClipboard();
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZVJvb3QiOiIuLi9jb2ZmZWUiLCJzb3VyY2VzIjpbIm1haW4uY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7Ozs7QUFBQSxJQUFBOztBQVFBLE1BQXdGLE9BQUEsQ0FBUSxLQUFSLENBQXhGLEVBQUUsU0FBRixFQUFLLGFBQUwsRUFBVSxtQkFBVixFQUFrQixpQkFBbEIsRUFBeUIsaUJBQXpCLEVBQWdDLFdBQWhDLEVBQW9DLG1CQUFwQyxFQUE0QyxlQUE1QyxFQUFrRCxXQUFsRCxFQUFzRCx5QkFBdEQsRUFBaUUsZUFBakUsRUFBdUUsaUJBQXZFLEVBQThFOztBQUU5RSxRQUFBLEdBQVcsT0FBQSxDQUFRLFVBQVI7O0FBQ1gsR0FBQSxHQUFXLE9BQUEsQ0FBUSxpQkFBUjs7QUFFWCxJQUFHLEVBQUUsQ0FBQyxRQUFILENBQUEsQ0FBQSxLQUFpQixRQUFwQjtJQUNJLFdBQUEsR0FBYyxPQUFBLENBQVEsZUFBUixFQURsQjs7O0FBR0EsR0FBQSxHQUFNLElBQUksR0FBSixDQUNGO0lBQUEsR0FBQSxFQUFZLFNBQVo7SUFDQSxHQUFBLEVBQVksR0FEWjtJQUVBLFFBQUEsRUFBWSxpQkFGWjtJQUdBLEtBQUEsRUFBWSxZQUhaO0lBSUEsSUFBQSxFQUFZLGdCQUpaO0lBS0EsSUFBQSxFQUFZLG9CQUxaO0lBTUEsS0FBQSxFQUFZLGtCQU5aO0lBT0EsTUFBQSxFQUFlLFNBQUE7ZUFBRyxJQUFBLENBQUE7SUFBSCxDQVBmO0lBUUEsYUFBQSxFQUFlLFNBQUE7ZUFBRyxhQUFBLENBQUE7SUFBSCxDQVJmO0lBU0EsS0FBQSxFQUFZLElBVFo7SUFVQSxNQUFBLEVBQVksSUFWWjtJQVdBLFFBQUEsRUFBWSxHQVhaO0lBWUEsU0FBQSxFQUFZLEdBWlo7Q0FERTs7QUFlTixTQUFBLEdBQWdCLFFBQVEsQ0FBQzs7QUFDekIsV0FBQSxHQUFnQixRQUFRLENBQUM7O0FBQ3pCLE9BQUEsR0FBZ0I7O0FBQ2hCLE9BQUEsR0FBZ0I7O0FBQ2hCLFNBQUEsR0FBZ0I7O0FBQ2hCLFNBQUEsR0FBZ0I7O0FBQ2hCLFdBQUEsR0FBZ0I7O0FBQ2hCLE9BQUEsR0FBZ0I7O0FBUWhCLElBQUksQ0FBQyxFQUFMLENBQVEsT0FBUixFQUFxQixTQUFDLEtBQUQ7V0FBVyxVQUFBLENBQVcsS0FBWDtBQUFYLENBQXJCOztBQUNBLElBQUksQ0FBQyxFQUFMLENBQVEsS0FBUixFQUFxQixTQUFDLEtBQUQ7V0FBVyxXQUFBLENBQVksS0FBWjtBQUFYLENBQXJCOztBQUNBLElBQUksQ0FBQyxLQUFMLENBQVcsU0FBWCxFQUFxQixTQUFBO1dBQVc7QUFBWCxDQUFyQjs7QUFDQSxJQUFJLENBQUMsRUFBTCxDQUFRLGFBQVIsRUFBNkIsU0FBQTtXQUFHLFdBQUEsQ0FBQTtBQUFILENBQTdCOztBQVFBLFlBQUEsR0FBZSxTQUFBO0FBRVgsUUFBQTtJQUFBLElBQUcsRUFBRSxDQUFDLFFBQUgsQ0FBQSxDQUFBLEtBQWlCLE9BQXBCO1FBQ0ksR0FBQSxHQUFNLE9BQUEsQ0FBUSxLQUFSO1FBQ04sSUFBQSxHQUFPLEtBQUEsQ0FBTSxHQUFBLENBQUksTUFBSixFQUFXLEtBQVgsQ0FBTjtRQUNQLE9BQUEsR0FBVSxLQUFLLENBQUMsSUFBTixDQUFXLElBQUksQ0FBQyxJQUFoQixFQUhkO0tBQUEsTUFJSyxJQUFHLEVBQUUsQ0FBQyxRQUFILENBQUEsQ0FBQSxLQUFpQixRQUFwQjtRQUNELE1BQUEsR0FBUyxTQUFBLENBQVUscUpBQVY7UUFNVCxPQUFBLEdBQVUsTUFBTSxDQUFDLFFBQVAsQ0FBZ0IsWUFBQSxHQUFhLE1BQTdCO1FBQ1YsT0FBQSxHQUFVLE1BQUEsQ0FBTyxPQUFQLENBQWUsQ0FBQyxJQUFoQixDQUFBLEVBUlQ7O1dBU0w7QUFmVzs7QUF1QmYsV0FBQSxHQUFjLFNBQUMsT0FBRDtBQUVWLFFBQUE7SUFBQSxRQUFBLEdBQWMsT0FBRCxHQUFTLEdBQVQsR0FBWSxPQUFaLEdBQW9CO0lBQ2pDLElBQUcsQ0FBSSxLQUFLLENBQUMsTUFBTixDQUFhLFFBQWIsQ0FBUDtRQUNJLEdBQUEsR0FBTSxXQUFBLENBQVksT0FBWixFQUFxQixPQUFyQixFQUE4QixHQUE5QjtRQUNOLElBQXNCLENBQUksR0FBMUI7WUFBQSxPQUFBLEdBQVUsU0FBVjtTQUZKOztXQUdBO0FBTlU7O0FBUWQsYUFBQSxHQUFnQixTQUFBO1dBRVosU0FBQSxHQUFZLFlBQUEsQ0FBQTtBQUZBOztBQVVoQixtQkFBQSxHQUFzQixTQUFBO0FBRWxCLFFBQUE7SUFBQSxHQUFBLEdBQU0sT0FBQSxDQUFRLEtBQVI7SUFDTixPQUFBLEdBQVU7SUFFVixPQUFBLEdBQVUsS0FBQSxDQUFNLEdBQUEsQ0FBSSxNQUFKLEVBQVcsS0FBWCxDQUFOO0lBRVYsT0FBQSxHQUFVLEtBQUssQ0FBQyxJQUFOLENBQVcsT0FBTyxDQUFDLElBQW5CO0lBQ1YsT0FBQSxHQUFVLEtBQUssQ0FBQyxHQUFOLENBQVUsU0FBVixFQUFvQixDQUFDLGlCQUFELENBQXBCO0lBQ1YsSUFBRyxDQUFJLEtBQUEsQ0FBTSxPQUFOLENBQVA7QUFDSSxhQUFBLHlDQUFBOztZQUNJLElBQVUsT0FBTyxDQUFDLFVBQVIsQ0FBbUIsS0FBbkIsQ0FBVjtBQUFBLHVCQUFBOztBQURKLFNBREo7O0lBR0EsUUFBQSxHQUFjLE9BQUQsR0FBUyxHQUFULEdBQVksT0FBWixHQUFvQjtJQUNqQyxJQUFHLENBQUksS0FBSyxDQUFDLE1BQU4sQ0FBYSxRQUFiLENBQVA7UUFDSSxHQUFBLENBQUksTUFBSixFQUFXLE9BQU8sQ0FBQyxJQUFuQixFQUF5QixRQUF6QixFQURKOztXQUdBLGtCQUFBLENBQUE7QUFoQmtCOztBQWtCdEIsbUJBQUEsR0FBc0IsU0FBQTtBQUVsQixRQUFBO0lBQUEsVUFBQSxHQUFhLFlBQUEsQ0FBQTtJQUNiLElBQXlCLFVBQVUsQ0FBQyxXQUFYLENBQUEsQ0FBQSxLQUE0QixVQUFyRDtRQUFBLFVBQUEsR0FBYSxTQUFiOztJQUNBLElBQXlCLENBQUMsQ0FBSSxTQUFMLENBQUEsSUFBb0IsQ0FBQyxDQUFJLFVBQUwsQ0FBN0M7UUFBQSxTQUFBLEdBQWEsU0FBYjs7SUFFQSxPQUFBLEdBQVUsV0FBQSxxQkFBWSxZQUFZLFVBQXhCO1dBRVYsa0JBQUEsQ0FBQTtBQVJrQjs7QUFVdEIsa0JBQUEsR0FBcUIsU0FBQTtBQUVqQixRQUFBO0FBQUE7QUFBQSxTQUFBLHNDQUFBOztRQUVJLElBQUcsTUFBTSxDQUFDLFVBQVAsQ0FBa0IsUUFBbEIsQ0FBSDtZQUVJLFdBQUEsR0FBYyxTQUFTLENBQUMsU0FBVixDQUFBLENBQXFCLENBQUMsS0FBdEIsQ0FBQTtZQUNkLFNBQUEsR0FBYyxXQUFXLENBQUMsUUFBWixDQUFxQixRQUFyQjtBQUVkLGlCQUFBLDJDQUFBOztnQkFDSSxJQUFHLGlCQUFBLElBQWEsQ0FBQyxDQUFDLEtBQUYsS0FBVyxTQUEzQjtvQkFDSSxPQUFBLEdBQVUsQ0FBQyxDQUFDO29CQUNaLENBQUMsQ0FBQyxJQUFGLENBQU8sT0FBUCxFQUFnQixDQUFoQjtBQUNBLDBCQUhKOztBQURKO1lBTUEsT0FBTyxDQUFDLElBQVIsQ0FDSTtnQkFBQSxHQUFBLEVBQU8sT0FBUDtnQkFDQSxLQUFBLEVBQU8sU0FEUDtnQkFFQSxLQUFBLEVBQU8sT0FBTyxDQUFDLE1BRmY7YUFESjtZQUtBLE1BQUEsQ0FBTyxPQUFPLENBQUMsTUFBUixHQUFlLENBQXRCO0FBQ0EsbUJBakJKOztBQUZKO0lBcUJBLElBQUEsR0FBTyxTQUFTLENBQUMsUUFBVixDQUFBO0lBRVAsSUFBRyxJQUFJLENBQUMsTUFBTCxJQUFnQixJQUFJLENBQUMsSUFBTCxDQUFBLENBQVcsQ0FBQyxNQUEvQjtBQUVJLGFBQUEsMkNBQUE7O1lBQ0ksSUFBRyxnQkFBQSxJQUFZLENBQUMsQ0FBQyxJQUFGLEtBQVUsSUFBekI7Z0JBQ0ksT0FBQSxHQUFVLENBQUMsQ0FBQztnQkFDWixDQUFDLENBQUMsSUFBRixDQUFPLE9BQVAsRUFBZ0IsQ0FBaEI7QUFDQSxzQkFISjs7QUFESjtRQU1BLE9BQU8sQ0FBQyxJQUFSLENBQ0k7WUFBQSxHQUFBLEVBQU8sT0FBUDtZQUNBLElBQUEsRUFBTyxJQURQO1lBRUEsS0FBQSxFQUFPLE9BQU8sQ0FBQyxNQUFSLEdBQWUsQ0FGdEI7U0FESjtlQUtBLE1BQUEsQ0FBTyxPQUFPLENBQUMsTUFBUixHQUFlLENBQXRCLEVBYko7O0FBekJpQjs7QUF3Q3JCLGNBQUEsR0FBaUIsU0FBQTtBQUViLFFBQUE7SUFBQSxFQUFBLEdBQUssT0FBQSxDQUFRLDRCQUFSO0lBRUwsSUFBRyxFQUFFLENBQUMsUUFBSCxDQUFBLENBQUEsS0FBaUIsT0FBcEI7ZUFDSSxFQUFBLENBQUc7WUFBQSxVQUFBLEVBQVcsR0FBWDtZQUFnQixhQUFBLEVBQWMsbUJBQTlCO1lBQW1ELFlBQUEsRUFBYSxtQkFBaEU7U0FBSCxFQURKO0tBQUEsTUFBQTtlQUdJLEVBQUEsQ0FBRztZQUFBLFVBQUEsRUFBVyxHQUFYO1lBQWdCLGFBQUEsRUFBYyxtQkFBOUI7WUFBbUQsWUFBQSxFQUFhLG1CQUFoRTtTQUFILEVBSEo7O0FBSmE7O0FBZWpCLFNBQUEsR0FBWSxTQUFDLEtBQUQ7QUFFUixRQUFBO0lBQUEsSUFBVSxDQUFDLEtBQUEsR0FBUSxDQUFULENBQUEsSUFBZSxDQUFDLEtBQUEsR0FBUSxPQUFPLENBQUMsTUFBUixHQUFlLENBQXhCLENBQXpCO0FBQUEsZUFBQTs7SUFDQSxJQUFHLE9BQVEsQ0FBQSxLQUFBLENBQU0sQ0FBQyxLQUFsQjtRQUNJLEtBQUEsR0FBUSxXQUFXLENBQUMsZ0JBQVosQ0FBNkIsSUFBSSxNQUFKLENBQVcsT0FBUSxDQUFBLEtBQUEsQ0FBTSxDQUFDLEtBQTFCLEVBQWlDLFFBQWpDLENBQTdCO1FBQ1IsSUFBRyxDQUFJLEtBQUssQ0FBQyxPQUFOLENBQUEsQ0FBSixJQUF3QixDQUFDLEtBQUssQ0FBQyxPQUFOLENBQUEsQ0FBZSxDQUFDLEtBQWhCLEdBQXdCLEtBQUssQ0FBQyxPQUFOLENBQUEsQ0FBZSxDQUFDLE1BQXhDLEdBQWlELENBQWxELENBQTNCO1lBQ0ksU0FBUyxDQUFDLFVBQVYsQ0FBcUIsS0FBckIsRUFBNkIsV0FBN0IsRUFESjtTQUZKOztJQUlBLElBQUcsNkJBQUEsSUFBeUIsQ0FBQyxPQUFRLENBQUEsS0FBQSxDQUFNLENBQUMsSUFBSSxDQUFDLE1BQXBCLEdBQTZCLENBQTlCLENBQTVCO2VBQ0ksU0FBUyxDQUFDLFNBQVYsQ0FBb0IsT0FBUSxDQUFBLEtBQUEsQ0FBTSxDQUFDLElBQW5DLEVBQXlDLFlBQXpDLEVBREo7O0FBUFE7O0FBZ0JaLFVBQUEsR0FBYSxTQUFDLEtBQUQ7QUFFVCxRQUFBO0lBQUEsU0FBQSxDQUFVLEtBQVY7SUFDQSxTQUFBLHNEQUF1QyxDQUFFO0lBRXpDLElBQUcsRUFBRSxDQUFDLFFBQUgsQ0FBQSxDQUFBLEtBQWlCLE9BQXBCO1FBQ0ksR0FBQSxHQUFNLE9BQUEsQ0FBUSxLQUFSO1FBQ04sS0FBQSxHQUFRLFNBQUE7WUFDSixJQUFHLFNBQUEsS0FBYSxRQUFoQjt1QkFDSSxHQUFBLENBQUksS0FBSixFQUFVLGNBQVYsRUFESjthQUFBLE1BQUE7dUJBR0ksR0FBQSxDQUFJLEtBQUosRUFBVSxRQUFWLEVBSEo7O1FBREk7UUFLUixHQUFHLENBQUMsR0FBRyxDQUFDLEtBQVIsQ0FBQTtlQUNBLFVBQUEsQ0FBVyxLQUFYLEVBQWtCLEVBQWxCLEVBUko7S0FBQSxNQVNLLElBQUcsRUFBRSxDQUFDLFFBQUgsQ0FBQSxDQUFBLEtBQWlCLFFBQXBCO1FBQ0QsTUFBTSxDQUFDLFFBQVAsQ0FBZ0IsWUFBQSxHQUFlLFNBQUEsQ0FBVSx3RUFBVixDQUEvQjtlQUdBLE1BQU0sQ0FBQyxRQUFQLENBQWdCLFlBQUEsR0FBZSxTQUFBLENBQVUsMEVBQVYsQ0FBL0IsRUFKQzs7QUFkSTs7QUE0QmIsV0FBQSxHQUFjLFNBQUMsS0FBRDtJQUVWLE9BQU8sQ0FBQyxNQUFSLENBQWUsS0FBZixFQUFzQixDQUF0QjtXQUNBLE1BQUEsQ0FBTyxLQUFBLEdBQU0sQ0FBYjtBQUhVOztBQUtkLElBQUEsR0FBTyxTQUFBO0lBRUgsVUFBQSxDQUFBO2lDQUNBLFdBQVcsQ0FBRSxJQUFiLENBQUE7QUFIRzs7QUFLUCxNQUFBLEdBQVMsU0FBQyxLQUFEOztRQUFDLFFBQU07O1dBRVosSUFBSSxDQUFDLE1BQUwsQ0FBWSxhQUFaLEVBQTBCLE9BQTFCLEVBQW1DLEtBQW5DO0FBRks7O0FBSVQsV0FBQSxHQUFjLFNBQUE7SUFFVixPQUFBLEdBQVU7SUFDVixVQUFBLENBQUE7V0FDQSxNQUFBLENBQUE7QUFKVTs7QUFNZCxVQUFBLEdBQWEsU0FBQTtXQUVULElBQUksQ0FBQyxJQUFMLENBQWEsR0FBRyxDQUFDLFFBQUwsR0FBYyxlQUExQixFQUF5QyxPQUFPLENBQUMsS0FBUixDQUFjLENBQUUsS0FBSyxDQUFDLEdBQU4sQ0FBVSxZQUFWLEVBQXdCLEVBQXhCLENBQWhCLENBQXpDO0FBRlM7O0FBSWIsVUFBQSxHQUFhLFNBQUE7QUFFVDtRQUNJLE9BQUEsR0FBVSxJQUFJLENBQUMsSUFBTCxDQUFVLEtBQUssQ0FBQyxJQUFOLENBQWMsR0FBRyxDQUFDLFFBQUwsR0FBYyxlQUEzQixDQUFWO2VBQ1YsT0FBQSxxQkFBVSxVQUFVLEdBRnhCO0tBQUEsYUFBQTtlQUlJLE9BQUEsR0FBVSxHQUpkOztBQUZTOztBQWNiLElBQUksQ0FBQyxFQUFMLENBQVEsVUFBUixFQUFtQixTQUFBO0FBRWYsUUFBQTtJQUFBLFVBQUEsQ0FBQTtJQUVBLE9BQUEsR0FBVSxLQUFLLENBQUMsT0FBTixDQUFpQixHQUFHLENBQUMsUUFBTCxHQUFjLFFBQTlCO0lBQ1YsRUFBRSxDQUFDLGFBQUgsQ0FBaUIsT0FBakI7QUFFQTtRQUNJLEVBQUUsQ0FBQyxVQUFILENBQWMsS0FBSyxDQUFDLElBQU4sQ0FBVyxPQUFYLEVBQW9CLFlBQXBCLENBQWQsRUFBaUQsRUFBRSxDQUFDLElBQXBELEVBREo7S0FBQSxhQUFBO0FBR0k7WUFDSSxFQUFFLENBQUMsUUFBSCxDQUFlLFNBQUQsR0FBVyxvQkFBekIsRUFBOEMsS0FBSyxDQUFDLElBQU4sQ0FBVyxPQUFYLEVBQW9CLFlBQXBCLENBQTlDLEVBREo7U0FBQSxhQUFBO1lBRU07WUFDRixNQUFBLENBQU8sMEJBQUEsR0FBMkIsR0FBbEMsRUFISjtTQUhKOztXQVFBLGNBQUEsQ0FBQTtBQWZlLENBQW5CIiwic291cmNlc0NvbnRlbnQiOlsiIyMjXG4wMCAgICAgMDAgICAwMDAwMDAwICAgMDAwICAwMDAgICAwMDBcbjAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgIDAwMDAgIDAwMFxuMDAwMDAwMDAwICAwMDAwMDAwMDAgIDAwMCAgMDAwIDAgMDAwXG4wMDAgMCAwMDAgIDAwMCAgIDAwMCAgMDAwICAwMDAgIDAwMDBcbjAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgIDAwMCAgIDAwMFxuIyMjXG5cbnsgXywgYXBwLCBjaGlsZHAsIGVtcHR5LCBmaXJzdCwgZnMsIGtlcnJvciwgbm9vbiwgb3MsIG9zYXNjcmlwdCwgcG9zdCwgcHJlZnMsIHNsYXNoIH0gPSByZXF1aXJlICdreGsnXG5cbmVsZWN0cm9uID0gcmVxdWlyZSAnZWxlY3Ryb24nXG5wa2cgICAgICA9IHJlcXVpcmUgJy4uL3BhY2thZ2UuanNvbidcblxuaWYgb3MucGxhdGZvcm0oKSA9PSAnZGFyd2luJ1xuICAgIGFwcEljb25TeW5jID0gcmVxdWlyZSAnLi9hcHBpY29uc3luYydcblxuYXBwID0gbmV3IGFwcFxuICAgIGRpcjogICAgICAgIF9fZGlybmFtZVxuICAgIHBrZzogICAgICAgIHBrZ1xuICAgIHNob3J0Y3V0OiAgICdDbWRPckN0cmwrQWx0K1YnXG4gICAgaW5kZXg6ICAgICAgJ2luZGV4Lmh0bWwnXG4gICAgaWNvbjogICAgICAgJy4uL2ltZy9hcHAuaWNvJ1xuICAgIHRyYXk6ICAgICAgICcuLi9pbWcvbWVudUAyeC5wbmcnXG4gICAgYWJvdXQ6ICAgICAgJy4uL2ltZy9hYm91dC5wbmcnXG4gICAgb25RdWl0OiAgICAgICAgLT4gcXVpdCgpXG4gICAgb25XaWxsU2hvd1dpbjogLT4gb25XaWxsU2hvd1dpbigpXG4gICAgd2lkdGg6ICAgICAgMTAwMFxuICAgIGhlaWdodDogICAgIDEyMDBcbiAgICBtaW5XaWR0aDogICAzMDBcbiAgICBtaW5IZWlnaHQ6ICAyMDBcblxuY2xpcGJvYXJkICAgICA9IGVsZWN0cm9uLmNsaXBib2FyZFxubmF0aXZlSW1hZ2UgICA9IGVsZWN0cm9uLm5hdGl2ZUltYWdlXG5idWZmZXJzICAgICAgID0gW11cbmljb25EaXIgICAgICAgPSBcIlwiXG5hY3RpdmVBcHAgICAgID0gXCJcIlxub3JpZ2luQXBwICAgICA9IG51bGxcbmNsaXBwb1dhdGNoICAgPSBudWxsXG5hcHBOYW1lICAgICAgID0gJ2NsaXBwbydcblxuIyAwMDAwMDAwMCAgICAwMDAwMDAwICAgIDAwMDAwMDAgIDAwMDAwMDAwMFxuIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgICAgIDAwMFxuIyAwMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgICAgIDAwMFxuIyAwMDAgICAgICAgIDAwMCAgIDAwMCAgICAgICAwMDAgICAgIDAwMFxuIyAwMDAgICAgICAgICAwMDAwMDAwICAgMDAwMDAwMCAgICAgIDAwMFxuXG5wb3N0Lm9uICdwYXN0ZScgICAgICAoaW5kZXgpIC0+IHBhc3RlSW5kZXggaW5kZXhcbnBvc3Qub24gJ2RlbCcgICAgICAgIChpbmRleCkgLT4gZGVsZXRlSW5kZXggaW5kZXhcbnBvc3Qub25HZXQgJ2J1ZmZlcnMnICgpICAgICAgLT4gYnVmZmVyc1xucG9zdC5vbiAnY2xlYXJCdWZmZXInICAgICAgICAtPiBjbGVhckJ1ZmZlcigpXG5cbiMgMDAwMDAwMCAgICAwMDAwMDAwICAwMDAwMDAwMDAgIDAwMCAgMDAwICAgMDAwICAwMDAwMDAwMFxuIzAwMCAgIDAwMCAgMDAwICAgICAgICAgIDAwMCAgICAgMDAwICAwMDAgICAwMDAgIDAwMFxuIzAwMDAwMDAwMCAgMDAwICAgICAgICAgIDAwMCAgICAgMDAwICAgMDAwIDAwMCAgIDAwMDAwMDBcbiMwMDAgICAwMDAgIDAwMCAgICAgICAgICAwMDAgICAgIDAwMCAgICAgMDAwICAgICAwMDBcbiMwMDAgICAwMDAgICAwMDAwMDAwICAgICAwMDAgICAgIDAwMCAgICAgIDAgICAgICAwMDAwMDAwMFxuXG5nZXRBY3RpdmVBcHAgPSAtPlxuXG4gICAgaWYgb3MucGxhdGZvcm0oKSA9PSAnd2luMzInXG4gICAgICAgIHd4dyA9IHJlcXVpcmUgJ3d4dydcbiAgICAgICAgaW5mbyA9IGZpcnN0IHd4dyAnaW5mbycgJ3RvcCdcbiAgICAgICAgYXBwTmFtZSA9IHNsYXNoLmJhc2UgaW5mby5wYXRoXG4gICAgZWxzZSBpZiBvcy5wbGF0Zm9ybSgpID09ICdkYXJ3aW4nXG4gICAgICAgIHNjcmlwdCA9IG9zYXNjcmlwdCBcIlwiXCJcbiAgICAgICAgdGVsbCBhcHBsaWNhdGlvbiBcIlN5c3RlbSBFdmVudHNcIlxuICAgICAgICAgICAgc2V0IG4gdG8gbmFtZSBvZiBmaXJzdCBhcHBsaWNhdGlvbiBwcm9jZXNzIHdob3NlIGZyb250bW9zdCBpcyB0cnVlXG4gICAgICAgIGVuZCB0ZWxsXG4gICAgICAgIGRvIHNoZWxsIHNjcmlwdCBcImVjaG8gXCIgJiBuXG4gICAgICAgIFwiXCJcIlxuICAgICAgICBhcHBOYW1lID0gY2hpbGRwLmV4ZWNTeW5jIFwib3Nhc2NyaXB0ICN7c2NyaXB0fVwiXG4gICAgICAgIGFwcE5hbWUgPSBTdHJpbmcoYXBwTmFtZSkudHJpbSgpXG4gICAgYXBwTmFtZVxuXG4jIDAwMDAwMDAgICAwMDAwMDAwMCAgIDAwMDAwMDAwICAgMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDBcbiMwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMDAgIDAwMFxuIzAwMDAwMDAwMCAgMDAwMDAwMDAgICAwMDAwMDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwIDAgMDAwXG4jMDAwICAgMDAwICAwMDAgICAgICAgIDAwMCAgICAgICAgMDAwICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgIDAwMDBcbiMwMDAgICAwMDAgIDAwMCAgICAgICAgMDAwICAgICAgICAwMDAgICAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMCAgIDAwMFxuXG5zYXZlQXBwSWNvbiA9IChhcHBOYW1lKSAtPlxuXG4gICAgaWNvblBhdGggPSBcIiN7aWNvbkRpcn0vI3thcHBOYW1lfS5wbmdcIlxuICAgIGlmIG5vdCBzbGFzaC5pc0ZpbGUgaWNvblBhdGhcbiAgICAgICAgcG5nID0gYXBwSWNvblN5bmMgYXBwTmFtZSwgaWNvbkRpciwgMTI4XG4gICAgICAgIGFwcE5hbWUgPSBcImNsaXBwb1wiIGlmIG5vdCBwbmdcbiAgICBhcHBOYW1lXG5cbm9uV2lsbFNob3dXaW4gPSAtPlxuICAgIFxuICAgIGFjdGl2ZUFwcCA9IGdldEFjdGl2ZUFwcCgpXG4gICAgXG4jIDAwMCAgIDAwMCAgMDAwICAwMDAgICAwMDAgICAgICAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwMDAgICAwMDAwMDAwICAwMDAgICAwMDAgIFxuIyAwMDAgMCAwMDAgIDAwMCAgMDAwMCAgMDAwICAgICAgICAwMDAgMCAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAwMDAgICAgICAgMDAwICAgMDAwICBcbiMgMDAwMDAwMDAwICAwMDAgIDAwMCAwIDAwMCAgICAgICAgMDAwMDAwMDAwICAwMDAwMDAwMDAgICAgIDAwMCAgICAgMDAwICAgICAgIDAwMDAwMDAwMCAgXG4jIDAwMCAgIDAwMCAgMDAwICAwMDAgIDAwMDAgICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgICAwMDAgICAgIDAwMCAgICAgICAwMDAgICAwMDAgIFxuIyAwMCAgICAgMDAgIDAwMCAgMDAwICAgMDAwICAgICAgICAwMCAgICAgMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAgMDAwMDAwMCAgMDAwICAgMDAwICBcblxud2luQ2xpcGJvYXJkQ2hhbmdlZCA9IC0+XG5cbiAgICB3eHcgPSByZXF1aXJlICd3eHcnXG4gICAgYXBwTmFtZSA9ICdjbGlwcG8nXG4gICAgXG4gICAgd2luSW5mbyA9IGZpcnN0IHd4dyAnaW5mbycgJ3RvcCdcblxuICAgIGFwcE5hbWUgPSBzbGFzaC5iYXNlIHdpbkluZm8ucGF0aFxuICAgIGV4Y2x1ZGUgPSBwcmVmcy5nZXQgJ2V4Y2x1ZGUnIFsncGFzc3dvcmQtdHVydGxlJ11cbiAgICBpZiBub3QgZW1wdHkgZXhjbHVkZVxuICAgICAgICBmb3IgZXhhcHAgaW4gZXhjbHVkZVxuICAgICAgICAgICAgcmV0dXJuIGlmIGFwcE5hbWUuc3RhcnRzV2l0aCBleGFwcFxuICAgIGljb25QYXRoID0gXCIje2ljb25EaXJ9LyN7YXBwTmFtZX0ucG5nXCJcbiAgICBpZiBub3Qgc2xhc2guaXNGaWxlIGljb25QYXRoXG4gICAgICAgIHd4dyAnaWNvbicgd2luSW5mby5wYXRoLCBpY29uUGF0aFxuICAgICAgICAgICAgICAgICAgICBcbiAgICBvbkNsaXBib2FyZENoYW5nZWQoKVxuXG5tYWNDbGlwYm9hcmRDaGFuZ2VkID0gLT5cblxuICAgIGN1cnJlbnRBcHAgPSBnZXRBY3RpdmVBcHAoKVxuICAgIGN1cnJlbnRBcHAgPSAnY2xpcHBvJyBpZiBjdXJyZW50QXBwLnRvTG93ZXJDYXNlKCkgPT0gJ2VsZWN0cm9uJ1xuICAgIG9yaWdpbkFwcCAgPSAnY2xpcHBvJyBpZiAobm90IG9yaWdpbkFwcCkgYW5kIChub3QgY3VycmVudEFwcClcblxuICAgIGFwcE5hbWUgPSBzYXZlQXBwSWNvbiBvcmlnaW5BcHAgPyBjdXJyZW50QXBwXG5cbiAgICBvbkNsaXBib2FyZENoYW5nZWQoKVxuICAgIFxub25DbGlwYm9hcmRDaGFuZ2VkID0gLT5cblxuICAgIGZvciBmb3JtYXQgaW4gY2xpcGJvYXJkLmF2YWlsYWJsZUZvcm1hdHMoKVxuXG4gICAgICAgIGlmIGZvcm1hdC5zdGFydHNXaXRoICdpbWFnZS8nXG5cbiAgICAgICAgICAgIGltYWdlQnVmZmVyID0gY2xpcGJvYXJkLnJlYWRJbWFnZSgpLnRvUE5HKClcbiAgICAgICAgICAgIGltYWdlRGF0YSAgID0gaW1hZ2VCdWZmZXIudG9TdHJpbmcoJ2Jhc2U2NCcpXG5cbiAgICAgICAgICAgIGZvciBiIGluIGJ1ZmZlcnNcbiAgICAgICAgICAgICAgICBpZiBiLmltYWdlPyBhbmQgYi5pbWFnZSA9PSBpbWFnZURhdGFcbiAgICAgICAgICAgICAgICAgICAgYXBwTmFtZSA9IGIuYXBwXG4gICAgICAgICAgICAgICAgICAgIF8ucHVsbCBidWZmZXJzLCBiXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICAgIGJ1ZmZlcnMucHVzaFxuICAgICAgICAgICAgICAgIGFwcDogICBhcHBOYW1lXG4gICAgICAgICAgICAgICAgaW1hZ2U6IGltYWdlRGF0YVxuICAgICAgICAgICAgICAgIGNvdW50OiBidWZmZXJzLmxlbmd0aFxuXG4gICAgICAgICAgICByZWxvYWQgYnVmZmVycy5sZW5ndGgtMVxuICAgICAgICAgICAgcmV0dXJuXG5cbiAgICB0ZXh0ID0gY2xpcGJvYXJkLnJlYWRUZXh0KClcblxuICAgIGlmIHRleHQubGVuZ3RoIGFuZCB0ZXh0LnRyaW0oKS5sZW5ndGhcblxuICAgICAgICBmb3IgYiBpbiBidWZmZXJzXG4gICAgICAgICAgICBpZiBiLnRleHQ/IGFuZCBiLnRleHQgPT0gdGV4dFxuICAgICAgICAgICAgICAgIGFwcE5hbWUgPSBiLmFwcFxuICAgICAgICAgICAgICAgIF8ucHVsbCBidWZmZXJzLCBiXG4gICAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICBidWZmZXJzLnB1c2hcbiAgICAgICAgICAgIGFwcDogICBhcHBOYW1lXG4gICAgICAgICAgICB0ZXh0OiAgdGV4dFxuICAgICAgICAgICAgY291bnQ6IGJ1ZmZlcnMubGVuZ3RoLTFcblxuICAgICAgICByZWxvYWQgYnVmZmVycy5sZW5ndGgtMVxuXG53YXRjaENsaXBib2FyZCA9IC0+XG4gICAgXG4gICAgY3cgPSByZXF1aXJlICdlbGVjdHJvbi1jbGlwYm9hcmQtd2F0Y2hlcidcblxuICAgIGlmIG9zLnBsYXRmb3JtKCkgPT0gJ3dpbjMyJ1xuICAgICAgICBjdyB3YXRjaERlbGF5OjIwMCwgb25JbWFnZUNoYW5nZTp3aW5DbGlwYm9hcmRDaGFuZ2VkLCBvblRleHRDaGFuZ2U6d2luQ2xpcGJvYXJkQ2hhbmdlZFxuICAgIGVsc2VcbiAgICAgICAgY3cgd2F0Y2hEZWxheToyMDAsIG9uSW1hZ2VDaGFuZ2U6bWFjQ2xpcGJvYXJkQ2hhbmdlZCwgb25UZXh0Q2hhbmdlOm1hY0NsaXBib2FyZENoYW5nZWRcblxuIyAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAwICAgMDAwICAgMDAwXG4jMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgMDAwIDAwMFxuIzAwMCAgICAgICAwMDAgICAwMDAgIDAwMDAwMDAwICAgICAwMDAwMFxuIzAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAgICAgMDAwXG4jIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwICAgICAgICAgICAwMDBcblxuY29weUluZGV4ID0gKGluZGV4KSAtPlxuXG4gICAgcmV0dXJuIGlmIChpbmRleCA8IDApIG9yIChpbmRleCA+IGJ1ZmZlcnMubGVuZ3RoLTEpXG4gICAgaWYgYnVmZmVyc1tpbmRleF0uaW1hZ2VcbiAgICAgICAgaW1hZ2UgPSBuYXRpdmVJbWFnZS5jcmVhdGVGcm9tQnVmZmVyIG5ldyBCdWZmZXIgYnVmZmVyc1tpbmRleF0uaW1hZ2UsICdiYXNlNjQnXG4gICAgICAgIGlmIG5vdCBpbWFnZS5pc0VtcHR5KCkgYW5kIChpbWFnZS5nZXRTaXplKCkud2lkdGggKiBpbWFnZS5nZXRTaXplKCkuaGVpZ2h0ID4gMClcbiAgICAgICAgICAgIGNsaXBib2FyZC53cml0ZUltYWdlIGltYWdlLCAgJ2ltYWdlL3BuZydcbiAgICBpZiBidWZmZXJzW2luZGV4XS50ZXh0PyBhbmQgKGJ1ZmZlcnNbaW5kZXhdLnRleHQubGVuZ3RoID4gMClcbiAgICAgICAgY2xpcGJvYXJkLndyaXRlVGV4dCBidWZmZXJzW2luZGV4XS50ZXh0LCAndGV4dC9wbGFpbidcblxuIzAwMDAwMDAwICAgIDAwMDAwMDAgICAgMDAwMDAwMCAgMDAwMDAwMDAwICAwMDAwMDAwMFxuIzAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAgICAgMDAwICAgICAwMDBcbiMwMDAwMDAwMCAgIDAwMDAwMDAwMCAgMDAwMDAwMCAgICAgIDAwMCAgICAgMDAwMDAwMFxuIzAwMCAgICAgICAgMDAwICAgMDAwICAgICAgIDAwMCAgICAgMDAwICAgICAwMDBcbiMwMDAgICAgICAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgICAgIDAwMCAgICAgMDAwMDAwMDBcblxucGFzdGVJbmRleCA9IChpbmRleCkgLT5cblxuICAgIGNvcHlJbmRleCBpbmRleFxuICAgIG9yaWdpbkFwcCA9IGJ1ZmZlcnMuc3BsaWNlKGluZGV4LCAxKVswXT8uYXBwXG5cbiAgICBpZiBvcy5wbGF0Zm9ybSgpID09ICd3aW4zMidcbiAgICAgICAgd3h3ID0gcmVxdWlyZSAnd3h3J1xuICAgICAgICBwYXN0ZSA9IC0+XG4gICAgICAgICAgICBpZiBhY3RpdmVBcHAgPT0gJ21pbnR0eSdcbiAgICAgICAgICAgICAgICB3eHcgJ2tleScgJ2N0cmwrc2hpZnQrdidcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB3eHcgJ2tleScgJ2N0cmwrdidcbiAgICAgICAgYXBwLndpbi5jbG9zZSgpXG4gICAgICAgIHNldFRpbWVvdXQgcGFzdGUsIDIwXG4gICAgZWxzZSBpZiBvcy5wbGF0Zm9ybSgpID09ICdkYXJ3aW4nXG4gICAgICAgIGNoaWxkcC5leGVjU3luYyBcIm9zYXNjcmlwdCBcIiArIG9zYXNjcmlwdCBcIlwiXCJcbiAgICAgICAgICAgIHRlbGwgYXBwbGljYXRpb24gXCJTeXN0ZW0gRXZlbnRzXCIgdG8ga2V5c3Ryb2tlIHRhYiB1c2luZyBjb21tYW5kIGRvd25cbiAgICAgICAgXCJcIlwiXG4gICAgICAgIGNoaWxkcC5leGVjU3luYyBcIm9zYXNjcmlwdCBcIiArIG9zYXNjcmlwdCBcIlwiXCJcbiAgICAgICAgICAgIHRlbGwgYXBwbGljYXRpb24gXCJTeXN0ZW0gRXZlbnRzXCIgdG8ga2V5c3Ryb2tlIFwidlwiIHVzaW5nIGNvbW1hbmQgZG93blxuICAgICAgICBcIlwiXCJcblxuIzAwMDAwMDAgICAgMDAwMDAwMDAgIDAwMFxuIzAwMCAgIDAwMCAgMDAwICAgICAgIDAwMFxuIzAwMCAgIDAwMCAgMDAwMDAwMCAgIDAwMFxuIzAwMCAgIDAwMCAgMDAwICAgICAgIDAwMFxuIzAwMDAwMDAgICAgMDAwMDAwMDAgIDAwMDAwMDBcblxuZGVsZXRlSW5kZXggPSAoaW5kZXgpIC0+XG5cbiAgICBidWZmZXJzLnNwbGljZSBpbmRleCwgMVxuICAgIHJlbG9hZCBpbmRleC0xXG5cbnF1aXQgPSAtPlxuXG4gICAgc2F2ZUJ1ZmZlcigpXG4gICAgY2xpcHBvV2F0Y2g/LmtpbGwoKVxuXG5yZWxvYWQgPSAoaW5kZXg9MCkgLT5cblxuICAgIHBvc3QudG9XaW5zICdsb2FkQnVmZmVycycgYnVmZmVycywgaW5kZXhcblxuY2xlYXJCdWZmZXIgPSAtPlxuXG4gICAgYnVmZmVycyA9IFtdXG4gICAgc2F2ZUJ1ZmZlcigpXG4gICAgcmVsb2FkKClcblxuc2F2ZUJ1ZmZlciA9IC0+XG5cbiAgICBub29uLnNhdmUgXCIje2FwcC51c2VyRGF0YX0vYnVmZmVycy5ub29uXCIgYnVmZmVycy5zbGljZSgtIHByZWZzLmdldCgnbWF4QnVmZmVycycsIDUwKSlcblxucmVhZEJ1ZmZlciA9IC0+XG5cbiAgICB0cnlcbiAgICAgICAgYnVmZmVycyA9IG5vb24ubG9hZCBzbGFzaC5wYXRoIFwiI3thcHAudXNlckRhdGF9L2J1ZmZlcnMubm9vblwiXG4gICAgICAgIGJ1ZmZlcnMgPSBidWZmZXJzID8gW11cbiAgICBjYXRjaFxuICAgICAgICBidWZmZXJzID0gW11cblxuIzAwMDAwMDAwICAgMDAwMDAwMDAgICAwMDAwMDAwICAgMDAwMDAwMCAgICAwMDAgICAwMDBcbiMwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgIDAwMCAwMDBcbiMwMDAwMDAwICAgIDAwMDAwMDAgICAwMDAwMDAwMDAgIDAwMCAgIDAwMCAgICAwMDAwMFxuIzAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgICAwMDBcbiMwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgICAgICAgMDAwXG5cbnBvc3Qub24gJ2FwcFJlYWR5JyAtPlxuXG4gICAgcmVhZEJ1ZmZlcigpXG5cbiAgICBpY29uRGlyID0gc2xhc2gucmVzb2x2ZSBcIiN7YXBwLnVzZXJEYXRhfS9pY29uc1wiXG4gICAgZnMuZW5zdXJlRGlyU3luYyBpY29uRGlyXG5cbiAgICB0cnlcbiAgICAgICAgZnMuYWNjZXNzU3luYyBzbGFzaC5qb2luKGljb25EaXIsICdjbGlwcG8ucG5nJyksIGZzLlJfT0tcbiAgICBjYXRjaFxuICAgICAgICB0cnlcbiAgICAgICAgICAgIGZzLmNvcHlTeW5jIFwiI3tfX2Rpcm5hbWV9Ly4uL2ltZy9jbGlwcG8ucG5nXCIsIHNsYXNoLmpvaW4gaWNvbkRpciwgJ2NsaXBwby5wbmcnXG4gICAgICAgIGNhdGNoIGVyclxuICAgICAgICAgICAga2Vycm9yIFwiY2FuJ3QgY29weSBjbGlwcG8gaWNvbjogI3tlcnJ9XCJcblxuICAgIHdhdGNoQ2xpcGJvYXJkKClcbiJdfQ==
//# sourceURL=../coffee/main.coffee